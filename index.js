"use strict";(()=>{var Z=Object.defineProperty;var L=(o,e)=>{for(var t in e)Z(o,t,{get:e[t],enumerable:!0})};var M={};L(M,{Flux:()=>ro,FluxDispatcher:()=>x,React:()=>f,ReactDOM:()=>to});var _={};L(_,{find:()=>A,findAll:()=>F,findByDisplayName:()=>O,findByDisplayNameAll:()=>eo,findByProps:()=>l,findByPropsAll:()=>oo,modules:()=>R});var W=window.webpackJsonp([],[(o,e,t)=>{o.exports=t}]);var $=(o,e=!1)=>t=>{let n=[];for(let i in o)if(o.hasOwnProperty(i)){let r=o[i].exports;if(!r)continue;if(r.default&&r.__esModule&&t(r.default)){if(e)return r.default;n.push(r.default)}if(t(r)){if(e)return r;n.push(r)}}if(!e)return n},R=W.c,A=$(R,!0),F=$(R),z=o=>e=>o.every(t=>e[t]!==void 0),q=(o,e)=>e?t=>t.displayName===o:t=>t?.default?.displayName===o,l=(...o)=>A(z(o)),oo=(...o)=>F(z(o)),O=(o,e=!0)=>A(q(o,e)),eo=(o,e=!0)=>F(q(o,e));var f=l("createElement"),to=l("render","findDOMNode"),ro=l("Store","initialize"),x=l("_isDispatching","dispatch");var P={};L(P,{after:()=>w,before:()=>no,instead:()=>io,unpatchAll:()=>S});var j=["a","b","i"],h=new Map;function J(o,e,t,n,i){let r=h.get(e)?.[o];if(!r)return i?Reflect.construct(e[o],t,n):e[o].apply(n,t);for(let s of r.b.values()){let p=s.call(n,t);Array.isArray(p)&&(t=p)}let c=(...s)=>i?Reflect.construct(r.o,s,n):r.o.apply(n,s);for(let s of r.i.values()){let p=c;c=(...u)=>s.call(n,u,p)}let a=c(...t);for(let s of r.a.values())a=s.call(n,t,a)??a;return a}function N(o,e,t,n){let i=h.get(o),r=i?.[e];return r?.[n].has(t)?(r[n].delete(t),j.every(c=>r[c].size===0)&&(Reflect.defineProperty(o,e,{value:r.o,writable:!0,configurable:!0})||(o[e]=r.o),delete i[e]),Object.keys(i).length==0&&h.delete(o),!0):!1}function S(){for(let[o,e]of h.entries())for(let t in e)for(let n of j)for(let i of e[t]?.[n].keys()??[])N(o,t,i,n)}var T=o=>(e,t,n,i=!1)=>{if(typeof t[e]!="function")throw new Error(`${e} is not a function in ${t.constructor.name}`);h.has(t)||h.set(t,{});let r=h.get(t);if(!r[e]){let s=t[e];r[e]={o:s,b:new Map,i:new Map,a:new Map};let p=(d,m,y)=>{let E=J(e,t,m,d,y);return i&&a(),E},u=new Proxy(s,{apply:(d,m,y)=>p(m,y,!1),construct:(d,m)=>p(s,m,!0),get:(d,m,y)=>m=="toString"?s.toString.bind(s):Reflect.get(d,m,y)});Reflect.defineProperty(t,e,{value:u,configurable:!0,writable:!0})||(t[e]=u)}let c=Symbol(),a=()=>N(t,e,c,o);return r[e][o].set(c,n),a};var no=T("b"),io=T("i"),w=T("a");function I(o){let e=document.createElement("style");return e.id="CORDWOOD_INJECTED_STYLE",e.innerHTML=o,document.head.appendChild(e),()=>{e.remove()}}var V={...P,injectCSS:I};var so=l("showChangeLog");function v(){w("showChangeLog",so,()=>{x.dispatch({type:"CHANGE_LOG_OPEN"})})}var ao=O("Checkbox"),b=class extends f.Component{constructor(e={}){super(e),this.state={toggled:0}}render(){return f.createElement("div",{className:"margin-top-20"},f.createElement(ao,{onChange:e=>console.log(e),value:!1}))}};var C=l("defaultRules","parserFor"),K=l("getDefaultRules","parserFor"),co=K.getDefaultRules(),po=C.defaultRules.lheading,lo=C.defaultRules.link,fo=C.defaultRules.image,uo=K.parserFor({...co,image:{...fo},link:{...lo},list:C.defaultRules.list,lheading:{...po,parse(o,e,t){return{className:/\{(.+?)}/.exec(o[1])[1],level:o[2]==="="?1:2,content:C.parseInline(e,o[1].replace(/\{.+?}/,""),t)}},react(o,e,t){return f.createElement(`h${o.level}`,{key:t.key,className:o.className},e(o.content,t))}}}),Y=({changelog:o})=>f.createElement("div",null,uo(o.body,!1));function B(){v();let o=l("UserSettingsModalSections");Object.assign(o.UserSettingsModalSections,{CORDWOOD:"CORDWOOD",CORDWOOD_CHANGELOG:"CORDWOOD_CHANGELOG"});let e=l("getUserSettingsModalSections");w("getUserSettingsModalSections",e,(n,i)=>{i.push({section:o.UserSettingsModalSections.CORDWOOD,label:"Cordwood",element:b})});let t=l("TabBarItem","TabBarHeader","TabBarSeparator");w("render",e.default.prototype,(n,i)=>{i.props.children[0].props.children.props.children[1].push(f.createElement(t.TabBarHeader,{className:"cordwood-settings-header"},"Cordwood"),f.createElement(t.TabBarItem,{key:"CORDWOOD"},"Plugins"),f.createElement("div",{className:"cordwood-changelog-button",onClick:()=>{mo(),x.dispatch({type:"CHANGE_LOG_OPEN"})}},"Cordwood Change Log")),i.props.children[0].props.children.props.selectedItem==="CORDWOOD"&&(i.props.children[1].props.children[0].props.children=f.createElement(b,null))})}function mo(){let o=O("MarkdownModal");w("render",o.prototype,(e,t)=>{if(!t.props.className.includes("change-log"))return t;let i=window.cordwood.changelog.replace(/\r/g,"").split(`---changelog---
`).slice(1).map(s=>{let p=!1,u={},g=s.split(`
`).filter(d=>{if(d==="---")return p=!0,!1;if(!p){let m=d.split(": "),y=m.shift(),E=m.join(": ");u[y]=JSON.parse(E)}return p}).join(`
`);return{...u,body:g}})[0],r=t.props.children[0].props.children[0];r[0].props.children="Cordwood Changelog",r[1]=` (${i.date})`;let c=t.props.children[2].props.children;c[1].props.href="https://github.com/Cordwood/Cordwood/blob/master/CHANGELOG.md";let a=t.props.children[1];return a.props.children[0]=null,a.props.children[1]=[f.createElement(Y,{changelog:i})],t},!0)}var U=(o,e,t)=>{console[t]("%cCordwood%c",`background-color: ${e}; color: black; font-weight: 600; border-radius: 16px; padding: 0px 5px 0px 5px;`,"",o)},k={log:o=>U(o,"#b6c76c","log"),warn:o=>U(o,"#e19c3d","warn"),error:o=>U(o,"#a63d40","error")};function D(o,e,{walkable:t=[],ignore:n=[],maxDepth:i=100}={}){let r=0;function c(a,s,{walkable:p=[],ignore:u=[]}={}){if(r+=1,!(r>i)){if(typeof s=="string"){if(a.hasOwnProperty(s))return a[s]}else if(s(a))return a;if(!!a){if(Array.isArray(a))for(let g of a){let d=c(g,s,{walkable:p,ignore:u});if(d)return d}else if(typeof a=="object"){for(let g of Object.keys(a))if(!(p!=null&&p.includes(g))&&!u.includes(g))try{let d=c(a[g],s,{walkable:p,ignore:u});if(d)return d}catch{}}}}}return c(o,e,{walkable:t,ignore:n})}function Q(o,e){D(o,e,{walkable:["props","children","child","sibling"]})}async function G(o){let e={cache:"no-cache"},t=new URL(o.endsWith("/")?o:o+"/"),n=await fetch(t+"manifest.json",e);if(!n.ok)throw new Error(`Could not load manifest for plugin at ${o}`);let i;try{i=await n.json()}catch{throw new Error(`Could not parse manifest for plugin at ${o}`)}let r;try{r=await(await fetch(t+"index.js",e)).text()}catch{throw new Error(`Could not load main file for plugin at ${o}`)}return{manifest:i,url:t,main:r}}var ho=window.eval;async function H(o){window.cordwood.plugins.loaded.push(o);let e=ho(o.main)(window.cordwood);e.onLoad&&e.onLoad()}if(window.cordwood)throw new Error("Cordwood is already injected...");var X=!1;try{B();let o=I(".cordwood-settings-header{padding-bottom:1rem}.cordwood-changelog-button{cursor:pointer;display:block!important;color:#faa61a!important;font-size:12px!important;padding:8px 6px 10px 20px!important;opacity:.7;-webkit-transition:opacity .2s!important;transition:opacity .2s}.cordwood-changelog-button:hover{opacity:1;color:#faa61a}");window.cordwood={util:{logger:k,findInTree:D,findInReactTree:Q},patcher:{...V},webpack:{..._,common:{...M}},plugins:{importPlugin:G,loadPlugin:H,loaded:new Array},uninject:()=>{S(),o(),delete window.cordwood}},fetch("https://raw.githubusercontent.com/Cordwood/Cordwood/master/CHANGELOG.md",{cache:"no-store"}).then(e=>e.text().then(t=>Object.assign(window.cordwood,{changelog:t})))}catch(o){X=!0,k.error(`Cordwood failed to initialize... ${o.stack?o.stack:o.toString()}`)}X||k.log("Loaded successfully!");})();
//# sourceURL=Cordwood