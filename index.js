"use strict";(()=>{var eo=Object.defineProperty;var F=(o,e)=>{for(var t in e)eo(o,t,{get:e[t],enumerable:!0})};var A=(o,e,t)=>{console[t]("%cCordwood%c",`background-color: ${e}; color: black; font-weight: 600; border-radius: 16px; padding: 0px 5px 0px 5px;`,"",o)},S={log:o=>A(o,"#b6c76c","log"),warn:o=>A(o,"#e19c3d","warn"),error:o=>A(o,"#a63d40","error")};var N={};F(N,{Flux:()=>so,FluxDispatcher:()=>x,React:()=>d,ReactDOM:()=>no});var M={};F(M,{find:()=>_,findAll:()=>L,findByDisplayName:()=>O,findByDisplayNameAll:()=>ro,findByProps:()=>p,findByPropsAll:()=>to,modules:()=>R});var W=window.webpackJsonp([],[(o,e,t)=>{o.exports=t}]);var $=(o,e=!1)=>t=>{let s=[];for(let a in o)if(o.hasOwnProperty(a)){let r=o[a].exports;if(!r)continue;if(r.default&&r.__esModule&&t(r.default)){if(e)return r.default;s.push(r.default)}if(t(r)){if(e)return r;s.push(r)}}if(!e)return s},R=W.c,_=$(R,!0),L=$(R),z=o=>e=>o.every(t=>e[t]!==void 0),J=(o,e)=>e?t=>t.displayName===o:t=>t?.default?.displayName===o,p=(...o)=>_(z(o)),to=(...o)=>L(z(o)),O=(o,e=!0)=>_(J(o,e)),ro=(o,e=!0)=>L(J(o,e));var d=p("createElement"),no=p("render","findDOMNode"),so=p("Store","initialize"),x=p("_isDispatching","dispatch");var v={};F(v,{after:()=>b,before:()=>io,instead:()=>ao,unpatchAll:()=>T});var j=["a","b","i"],h=new Map;function V(o,e,t,s,a){let r=h.get(e)?.[o];if(!r)return a?Reflect.construct(e[o],t,s):e[o].apply(s,t);for(let i of r.b.values()){let c=i.call(s,t);Array.isArray(c)&&(t=c)}let l=(...i)=>a?Reflect.construct(r.o,i,s):r.o.apply(s,i);for(let i of r.i.values()){let c=l;l=(...m)=>i.call(s,m,c)}let n=l(...t);for(let i of r.a.values())n=i.call(s,t,n)??n;return n}function I(o,e,t,s){let a=h.get(o),r=a?.[e];return r?.[s].has(t)?(r[s].delete(t),j.every(l=>r[l].size===0)&&(Reflect.defineProperty(o,e,{value:r.o,writable:!0,configurable:!0})||(o[e]=r.o),delete a[e]),Object.keys(a).length==0&&h.delete(o),!0):!1}function T(){for(let[o,e]of h.entries())for(let t in e)for(let s of j)for(let a of e[t]?.[s].keys()??[])I(o,t,a,s)}var k=o=>(e,t,s,a=!1)=>{if(typeof t[e]!="function")throw new Error(`${e} is not a function in ${t.constructor.name}`);h.has(t)||h.set(t,{});let r=h.get(t);if(!r[e]){let i=t[e];r[e]={o:i,b:new Map,i:new Map,a:new Map};let c=(f,u,y)=>{let E=V(e,t,u,f,y);return a&&n(),E},m=new Proxy(i,{apply:(f,u,y)=>c(u,y,!1),construct:(f,u)=>c(i,u,!0),get:(f,u,y)=>u=="toString"?i.toString.bind(i):Reflect.get(f,u,y)});Reflect.defineProperty(t,e,{value:m,configurable:!0,writable:!0})||(t[e]=m)}let l=Symbol(),n=()=>I(t,e,l,o);return r[e][o].set(l,s),n};var io=k("b"),ao=k("i"),b=k("a");function B(o){let e=document.createElement("style");return e.id="CORDWOOD_INJECTED_STYLE",e.innerHTML=o,document.head.appendChild(e),()=>{e.remove()}}var q={...v,injectCSS:B};var co=p("showChangeLog");function G(){b("showChangeLog",co,()=>{x.dispatch({type:"CHANGE_LOG_OPEN"})})}var po=O("Checkbox"),w=class extends d.Component{constructor(e={}){super(e),this.state={toggled:0}}render(){return d.createElement("div",{className:"margin-top-20"},d.createElement(po,{onChange:e=>console.log(e),value:!1}))}};var C=p("defaultRules","parserFor"),K=p("getDefaultRules","parserFor"),lo=K.getDefaultRules(),fo=C.defaultRules.lheading,uo=C.defaultRules.link,mo=C.defaultRules.image,ho=K.parserFor({...lo,image:{...mo},link:{...uo},list:C.defaultRules.list,lheading:{...fo,parse(o,e,t){return{className:/\{(.+?)}/.exec(o[1])[1],level:o[2]==="="?1:2,content:C.parseInline(e,o[1].replace(/\{.+?}/,""),t)}},react(o,e,t){return d.createElement(`h${o.level}`,{key:t.key,className:o.className},e(o.content,t))}}}),Y=({changelog:o})=>d.createElement("div",null,ho(o.body,!1));function U(){G();let o=p("UserSettingsModalSections");Object.assign(o.UserSettingsModalSections,{CORDWOOD:"CORDWOOD",CORDWOOD_CHANGELOG:"CORDWOOD_CHANGELOG"});let e=p("getUserSettingsModalSections");b("getUserSettingsModalSections",e,(a,r)=>{r.push({section:o.UserSettingsModalSections.CORDWOOD,label:"Cordwood",element:w})});let t=p("TabBarItem","TabBarHeader","TabBarSeparator"),s=O("MarkdownModal");b("render",e.default.prototype,(a,r)=>{r.props.children[0].props.children.props.children[1].push(d.createElement(t.TabBarHeader,{className:"cordwood-settings-header"},"Cordwood"),d.createElement(t.TabBarItem,{key:"CORDWOOD"},"Plugins"),d.createElement("div",{className:"cordwood-changelog-button",onClick:()=>{b("render",s.prototype,(l,n)=>{if(!n.props.className.includes("change-log"))return n;let c=window.cordwood.changelog.replace(/\r/g,"").split(`---changelog---
`).slice(1).map(f=>{let u=!1,y={},E=f.split(`
`).filter(H=>{if(H==="---")return u=!0,!1;if(!u){let P=H.split(": "),Z=P.shift(),oo=P.join(": ");y[Z]=JSON.parse(oo)}return u}).join(`
`);return{...y,body:E}})[0],m=n.props.children[0].props.children[0];m[0].props.children="Cordwood Changelog",m[1]=` (${c.date})`;let g=n.props.children[1];return g.props.children[0]=null,g.props.children[1]=[d.createElement(Y,{changelog:c})],n},!0),x.dispatch({type:"CHANGE_LOG_OPEN"})}},"Cordwood Change Log")),r.props.children[0].props.children.props.selectedItem==="CORDWOOD"&&(r.props.children[1].props.children[0].props.children=d.createElement(w,null))})}function D(o,e,{walkable:t=[],ignore:s=[],maxDepth:a=100}={}){let r=0;function l(n,i,{walkable:c=[],ignore:m=[]}={}){if(r+=1,!(r>a)){if(typeof i=="string"){if(n.hasOwnProperty(i))return n[i]}else if(i(n))return n;if(!!n){if(Array.isArray(n))for(let g of n){let f=l(g,i,{walkable:c,ignore:m});if(f)return f}else if(typeof n=="object"){for(let g of Object.keys(n))if(!(c!=null&&c.includes(g))&&!m.includes(g))try{let f=l(n[g],i,{walkable:c,ignore:m});if(f)return f}catch{}}}}}return l(o,e,{walkable:t,ignore:s})}function Q(o,e){D(o,e,{walkable:["props","children","child","sibling"]})}if(window.cordwood)throw new Error("Cordwood is already injected...");var X=!1;try{U();let o=B(".cordwood-settings-header{padding-bottom:1rem}.cordwood-changelog-button{cursor:pointer;display:block!important;color:#faa61a!important;font-size:12px!important;padding:8px 6px 10px 20px!important;opacity:.7;-webkit-transition:opacity .2s!important;transition:opacity .2s}.cordwood-changelog-button:hover{opacity:1;color:#faa61a}");window.cordwood={util:{logger:S,findInTree:D,findInReactTree:Q},patcher:{...q},webpack:{...M,common:{...N}},uninject:()=>{T(),o(),delete window.cordwood}},process.env.DEV?window.cordwood.changelog=process.env.__CHANGELOG__:fetch("https://raw.githubusercontent.com/Cordwood/Cordwood/master/CHANGELOG.md",{cache:"no-store"}).then(e=>e.text().then(t=>Object.assign(window.cordwood,{changelog:t})))}catch(o){X=!0,S.error(`Cordwood failed to initialize... ${o.stack?o.stack:o.toString()}`)}X||S.log("Loaded successfully!");})();
//# sourceURL=Cordwood