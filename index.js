"use strict";(()=>{var Q=Object.defineProperty;var F=(o,e)=>{for(var t in e)Q(o,t,{get:e[t],enumerable:!0})};var A=(o,e,t)=>{console[t]("%cCordwood%c",`background-color: ${e}; color: black; font-weight: 600; border-radius: 16px; padding: 0px 5px 0px 5px;`,"",o)},S={log:o=>A(o,"#b6c76c","log"),warn:o=>A(o,"#e19c3d","warn"),error:o=>A(o,"#a63d40","error")};var M={};F(M,{Flux:()=>eo,FluxDispatcher:()=>x,React:()=>f,ReactDOM:()=>oo});var N={};F(N,{find:()=>R,findAll:()=>_,findByDisplayName:()=>O,findByDisplayNameAll:()=>Z,findByProps:()=>l,findByPropsAll:()=>X,modules:()=>L});var H=window.webpackJsonp([],[(o,e,t)=>{o.exports=t}]);var P=(o,e=!1)=>t=>{let n=[];for(let s in o)if(o.hasOwnProperty(s)){let r=o[s].exports;if(!r)continue;if(r.default&&r.__esModule&&t(r.default)){if(e)return r.default;n.push(r.default)}if(t(r)){if(e)return r;n.push(r)}}if(!e)return n},L=H.c,R=P(L,!0),_=P(L),W=o=>e=>o.every(t=>e[t]!==void 0),$=(o,e)=>e?t=>t.displayName===o:t=>t?.default?.displayName===o,l=(...o)=>R(W(o)),X=(...o)=>_(W(o)),O=(o,e=!0)=>R($(o,e)),Z=(o,e=!0)=>_($(o,e));var f=l("createElement"),oo=l("render","findDOMNode"),eo=l("Store","initialize"),x=l("_isDispatching","dispatch");var v={};F(v,{after:()=>b,before:()=>to,instead:()=>ro,unpatchAll:()=>T});var j=["a","b","i"],m=new Map;function z(o,e,t,n,s){let r=m.get(e)?.[o];if(!r)return s?Reflect.construct(e[o],t,n):e[o].apply(n,t);for(let i of r.b.values()){let p=i.call(n,t);Array.isArray(p)&&(t=p)}let c=(...i)=>s?Reflect.construct(r.o,i,n):r.o.apply(n,i);for(let i of r.i.values()){let p=c;c=(...u)=>i.call(n,u,p)}let a=c(...t);for(let i of r.a.values())a=i.call(n,t,a)??a;return a}function I(o,e,t,n){let s=m.get(o),r=s?.[e];return r?.[n].has(t)?(r[n].delete(t),j.every(c=>r[c].size===0)&&(Reflect.defineProperty(o,e,{value:r.o,writable:!0,configurable:!0})||(o[e]=r.o),delete s[e]),Object.keys(s).length==0&&m.delete(o),!0):!1}function T(){for(let[o,e]of m.entries())for(let t in e)for(let n of j)for(let s of e[t]?.[n].keys()??[])I(o,t,s,n)}var k=o=>(e,t,n,s=!1)=>{if(typeof t[e]!="function")throw new Error(`${e} is not a function in ${t.constructor.name}`);m.has(t)||m.set(t,{});let r=m.get(t);if(!r[e]){let i=t[e];r[e]={o:i,b:new Map,i:new Map,a:new Map};let p=(d,h,y)=>{let E=z(e,t,h,d,y);return s&&a(),E},u=new Proxy(i,{apply:(d,h,y)=>p(h,y,!1),construct:(d,h)=>p(i,h,!0),get:(d,h,y)=>h=="toString"?i.toString.bind(i):Reflect.get(d,h,y)});Reflect.defineProperty(t,e,{value:u,configurable:!0,writable:!0})||(t[e]=u)}let c=Symbol(),a=()=>I(t,e,c,o);return r[e][o].set(c,n),a};var to=k("b"),ro=k("i"),b=k("a");function B(o){let e=document.createElement("style");return e.id="CORDWOOD_INJECTED_STYLE",e.innerHTML=o,document.head.appendChild(e),()=>{e.remove()}}var J={...v,injectCSS:B};var no=l("showChangeLog");function G(){b("showChangeLog",no,()=>{x.dispatch({type:"CHANGE_LOG_OPEN"})})}var so=O("Checkbox"),w=class extends f.Component{constructor(e={}){super(e),this.state={toggled:0}}render(){return f.createElement("div",{className:"margin-top-20"},f.createElement(so,{onChange:e=>console.log(e),value:!1}))}};var C=l("defaultRules","parserFor"),V=l("getDefaultRules","parserFor"),io=V.getDefaultRules(),ao=C.defaultRules.lheading,po=C.defaultRules.link,co=C.defaultRules.image,lo=V.parserFor({...io,image:{...co},link:{...po},list:C.defaultRules.list,lheading:{...ao,parse(o,e,t){return{className:/\{(.+?)}/.exec(o[1])[1],level:o[2]==="="?1:2,content:C.parseInline(e,o[1].replace(/\{.+?}/,""),t)}},react(o,e,t){return f.createElement(`h${o.level}`,{key:t.key,className:o.className},e(o.content,t))}}}),q=({changelog:o})=>f.createElement("div",null,lo(o.body,!1));function U(){G();let o=l("UserSettingsModalSections");Object.assign(o.UserSettingsModalSections,{CORDWOOD:"CORDWOOD",CORDWOOD_CHANGELOG:"CORDWOOD_CHANGELOG"});let e=l("getUserSettingsModalSections");b("getUserSettingsModalSections",e,(n,s)=>{s.push({section:o.UserSettingsModalSections.CORDWOOD,label:"Cordwood",element:w})});let t=l("TabBarItem","TabBarHeader","TabBarSeparator");b("render",e.default.prototype,(n,s)=>{s.props.children[0].props.children.props.children[1].push(f.createElement(t.TabBarHeader,{className:"cordwood-settings-header"},"Cordwood"),f.createElement(t.TabBarItem,{key:"CORDWOOD"},"Plugins"),f.createElement("div",{className:"cordwood-changelog-button",onClick:()=>{fo(),x.dispatch({type:"CHANGE_LOG_OPEN"})}},"Cordwood Change Log")),s.props.children[0].props.children.props.selectedItem==="CORDWOOD"&&(s.props.children[1].props.children[0].props.children=f.createElement(w,null))})}function fo(){let o=O("MarkdownModal");b("render",o.prototype,(e,t)=>{if(!t.props.className.includes("change-log"))return t;let s=window.cordwood.changelog.replace(/\r/g,"").split(`---changelog---
`).slice(1).map(i=>{let p=!1,u={},g=i.split(`
`).filter(d=>{if(d==="---")return p=!0,!1;if(!p){let h=d.split(": "),y=h.shift(),E=h.join(": ");u[y]=JSON.parse(E)}return p}).join(`
`);return{...u,body:g}})[0],r=t.props.children[0].props.children[0];r[0].props.children="Cordwood Changelog",r[1]=` (${s.date})`;let c=t.props.children[2].props.children;c[1].props.href="https://github.com/Cordwood/Cordwood/blob/master/CHANGELOG.md";let a=t.props.children[1];return a.props.children[0]=null,a.props.children[1]=[f.createElement(q,{changelog:s})],t},!0)}function D(o,e,{walkable:t=[],ignore:n=[],maxDepth:s=100}={}){let r=0;function c(a,i,{walkable:p=[],ignore:u=[]}={}){if(r+=1,!(r>s)){if(typeof i=="string"){if(a.hasOwnProperty(i))return a[i]}else if(i(a))return a;if(!!a){if(Array.isArray(a))for(let g of a){let d=c(g,i,{walkable:p,ignore:u});if(d)return d}else if(typeof a=="object"){for(let g of Object.keys(a))if(!(p!=null&&p.includes(g))&&!u.includes(g))try{let d=c(a[g],i,{walkable:p,ignore:u});if(d)return d}catch{}}}}}return c(o,e,{walkable:t,ignore:n})}function K(o,e){D(o,e,{walkable:["props","children","child","sibling"]})}if(window.cordwood)throw new Error("Cordwood is already injected...");var Y=!1;try{U();let o=B(".cordwood-settings-header{padding-bottom:1rem}.cordwood-changelog-button{cursor:pointer;display:block!important;color:#faa61a!important;font-size:12px!important;padding:8px 6px 10px 20px!important;opacity:.7;-webkit-transition:opacity .2s!important;transition:opacity .2s}.cordwood-changelog-button:hover{opacity:1;color:#faa61a}");window.cordwood={util:{logger:S,findInTree:D,findInReactTree:K},patcher:{...J},webpack:{...N,common:{...M}},uninject:()=>{T(),o(),delete window.cordwood}},fetch("https://raw.githubusercontent.com/Cordwood/Cordwood/master/CHANGELOG.md",{cache:"no-store"}).then(e=>e.text().then(t=>Object.assign(window.cordwood,{changelog:t})))}catch(o){Y=!0,S.error(`Cordwood failed to initialize... ${o.stack?o.stack:o.toString()}`)}Y||S.log("Loaded successfully!");})();
//# sourceURL=Cordwood