"use strict";(()=>{var Be=Object.create;var v=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var Ie=Object.getOwnPropertyNames;var Ue=Object.getPrototypeOf,Re=Object.prototype.hasOwnProperty;var Me=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ge=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),U=(e,t)=>{for(var r in t)v(e,r,{get:t[r],enumerable:!0})},We=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Ie(t))!Re.call(e,n)&&n!==r&&v(e,n,{get:()=>t[n],enumerable:!(o=Fe(t,n))||o.enumerable});return e};var pe=(e,t,r)=>(r=e!=null?Be(Ue(e)):{},We(t||!e||!e.__esModule?v(r,"default",{value:e,enumerable:!0}):r,e));var x=(e,t,r)=>(Me(e,typeof t!="symbol"?t+"":t,r),r);var re=Ge((er,F)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var r=[],o=0;o<arguments.length;o++){var n=arguments[o];if(!!n){var i=typeof n;if(i==="string"||i==="number")r.push(n);else if(Array.isArray(n)){if(n.length){var s=t.apply(null,n);s&&r.push(s)}}else if(i==="object")if(n.toString===Object.prototype.toString)for(var l in n)e.call(n,l)&&n[l]&&r.push(l);else r.push(n.toString())}}return r.join(" ")}typeof F<"u"&&F.exports?(t.default=t,F.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var $={};U($,{Flux:()=>T,FluxDispatcher:()=>g,React:()=>a,ReactDOM:()=>ze});var W={};U(W,{find:()=>M,findAll:()=>G,findByDisplayName:()=>b,findByDisplayNameAll:()=>He,findByProps:()=>u,findByPropsAll:()=>$e,modules:()=>R});var ue=window.webpackJsonp([],[(e,t,r)=>{e.exports=r}]);var fe=(e,t=!1)=>r=>{let o=[];for(let n in e)if(e.hasOwnProperty(n)){let i=e[n].exports;if(!i)continue;if(i.default&&i.__esModule&&r(i.default)){if(t)return i.default;o.push(i.default)}if(r(i)){if(t)return i;o.push(i)}}if(!t)return o},R=ue.c,M=fe(R,!0),G=fe(R),me=e=>t=>e.every(r=>t[r]!==void 0),he=(e,t)=>t?r=>r.displayName===e:r=>r?.default?.displayName===e,u=(...e)=>M(me(e)),$e=(...e)=>G(me(e)),b=(e,t=!0)=>M(he(e,t)),He=(e,t=!0)=>G(he(e,t));var a=u("createElement"),ze=u("render","findDOMNode"),T=u("Store","initialize"),g=u("_isDispatching","dispatch");var K={};U(K,{after:()=>_,before:()=>Ke,instead:()=>Ye,unpatchAll:()=>N});var H=["a","b","i"],y=new Map;function ge(e,t,r,o,n){let i=y.get(t)?.[e];if(!i)return n?Reflect.construct(t[e],r,o):t[e].apply(o,r);for(let c of i.b.values()){let p=c.call(o,r);Array.isArray(p)&&(r=p)}let s=(...c)=>n?Reflect.construct(i.o,c,o):i.o.apply(o,c);for(let c of i.i.values()){let p=s;s=(...m)=>c.call(o,m,p)}let l=s(...r);for(let c of i.a.values())l=c.call(o,r,l)??l;return l}function z(e,t,r,o){let n=y.get(e),i=n?.[t];return i?.[o].has(r)?(i[o].delete(r),H.every(s=>i[s].size===0)&&(Reflect.defineProperty(e,t,{value:i.o,writable:!0,configurable:!0})||(e[t]=i.o),delete n[t]),Object.keys(n).length==0&&y.delete(e),!0):!1}function N(){for(let[e,t]of y.entries())for(let r in t)for(let o of H)for(let n of t[r]?.[o].keys()??[])z(e,r,n,o)}var E=e=>(t,r,o,n=!1)=>{if(typeof r[t]!="function")throw new Error(`${t} is not a function in ${r.constructor.name}`);y.has(r)||y.set(r,{});let i=y.get(r);if(!i[t]){let c=r[t];i[t]={o:c,b:new Map,i:new Map,a:new Map};let p=(f,h,S)=>{let I=ge(t,r,h,f,S);return n&&l(),I},m=new Proxy(c,{apply:(f,h,S)=>p(h,S,!1),construct:(f,h)=>p(c,h,!0),get:(f,h,S)=>h=="toString"?c.toString.bind(c):Reflect.get(f,h,S)});Reflect.defineProperty(r,t,{value:m,configurable:!0,writable:!0})||(r[t]=m)}let s=Symbol(),l=()=>z(r,t,s,e);return i[t][e].set(s,o),l};var Ke=E("b"),Ye=E("i"),_=E("a");var ye=new Array;function Je(e){let t=document.createElement("style");t.id="CORDWOOD_INJECTED_STYLE",t.innerHTML=e,document.head.appendChild(t),ye.push(r);function r(){t.remove()}return r}function Y(){for(let e of ye)e()}var _e={...K,injectCSS:Je,clearStyles:Y};var Ve=u("showChangeLog");function J(){_("showChangeLog",Ve,()=>{g.dispatch({type:"CHANGE_LOG_OPEN"})})}function qe(e,t,r){if(e===t)return!0;let o=Object.keys(e),n=Object.keys(t);if(o.length!==n.length)return!1;for(let i=0;i<o.length;i++){let s=o[i];if(e[s]!==t[s]&&(r==null||r.indexOf(s)===-1))return!1}return!0}function Ze(e){return e.displayName||e.name||"Component"}function V(e,t){return r=>class extends a.Component{static displayName=`FluxContainer(${Ze(r)})`;constructor(o){super(o),this.state=t(o),this._handleStoreChange=this._handleStoreChange.bind(this)}_handleStoreChange(){this.setState(t(this.props))}componentWillMount(){e.forEach(o=>{o.addChangeListener(this._handleStoreChange)})}componentWillReceiveProps(o){qe(this.props,o)||this.setState(t(o))}componentWillUnmount(){e.forEach(o=>o.removeChangeListener(this._handleStoreChange))}render(){return a.createElement(r,{...this.props,...this.state},null)}}}function k(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function Qe(e,t){let r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);let o=k(r);return(n,i)=>o.then(s=>i(s.transaction(t,n).objectStore(t)))}var q;function L(){return q||(q=Qe("keyval-store","keyval")),q}function we(e,t=L()){return t("readonly",r=>k(r.get(e)))}function xe(e,t,r=L()){return r("readwrite",o=>(o.put(t,e),k(o.transaction)))}function be(e,t=L()){return t("readwrite",r=>(r.delete(e),k(r.transaction)))}function Ce(e=L()){return e("readwrite",t=>(t.clear(),k(t.transaction)))}var Z=class{async get(t,r=null){let o=await we(t);return o||(o=r),o}async set(t,r){await xe(t,r)}async remove(t){await be(t)}async clear(){await Ce()}},C=new Z;var Se="CordwoodSettingsStore",Q={fluxLogger:!1};async function Oe(e){let t=!1,r={};for(let[o,n]of Object.entries(e))n!=null&&(t=!0,Q[o]=n),r[o]=Q[o];return t&&await C.set(Se,r),t}var X=class extends T.Store{constructor(t,r){super(t,r)}async initialize(){let t=await C.get(Se);t!=null&&await Oe(t)}get fluxLogger(){return Q.fluxLogger}},A=new X(g,async e=>{switch(e.type){case"CORDWOOD_SETTINGS_UPDATE":return await Oe(e.settings);default:return!1}});var je={setFlux(e){g.dispatch({type:"CORDWOOD_SETTINGS_UPDATE",settings:{fluxLogger:e}})}};var Xe=b("Scroller"),et=b("Checkbox"),B=class extends a.Component{constructor(t={}){super(t)}render(){return a.createElement(Xe,{className:"settings-wrapper settings-panel"},a.createElement("div",{className:"control-groups"},a.createElement("div",{className:"control-group"},a.createElement("label",null,"Debug Settings"),a.createElement("ul",{className:"checkbox-group"},a.createElement("li",null,a.createElement(et,{onChange:t=>{je.setFlux(t.target.checked)},defaultChecked:this.props.fluxLogger},"Log everything that passes through the Flux Dispatcher.")),a.createElement("li",null,a.createElement("div",{className:"help-text"},"Note that this will clog up your console."))))))}};x(B,"displayName","SettingsView");var ee=V([A],()=>({fluxLogger:A.fluxLogger}))(B);var O=u("defaultRules","parserFor"),Te=u("getDefaultRules","parserFor"),tt=Te.getDefaultRules(),rt=O.defaultRules.lheading,De=O.defaultRules.link,ot=O.defaultRules.image,nt=Te.parserFor({...tt,image:{...ot},link:{...De},list:O.defaultRules.list,lheading:{...rt,parse(e,t,r){return{className:/\{(.+?)}/.exec(e[1])[1],level:e[2]==="="?1:2,content:O.parseInline(t,e[1].replace(/\{.+?}/,""),r)}},react(e,t,r){return a.createElement(`h${e.level}`,{key:r.key,className:e.className},t(e.content,r))}},shortlink:{shortlinks:{gh:"github.com",srht:"git.sr.ht"},regex:/^\[(.+?)\]\((.+?):([^\/].+?)\)/,order:De.order-.5,match(e){return this.regex.exec(e)},parse(e,t,r){return{content:O.parseInline(t,e[1],r),target:`https://${this.shortlinks[e[2]]}/${e[3]}`}},react(e,t,r){return a.createElement("a",{href:e.target},t(e.content,r))}}}),ke=({changelog:e})=>a.createElement("div",null,nt(e.body,!1));var it="._cordwood-settings-header_1mzwv_1{paddingbottom:1rem}._cordwood-changelog-button_1mzwv_1{display:block;color:#faa61a;font-size:12px;padding:8px 6px 10px 20px;cursor:pointer;opacity:.7;-webkit-transition:opacity .2s ease;transition:opacity .2s ease}._cordwood-changelog-button_1mzwv_1:hover{opacity:1;color:#faa61a}";document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(it));var te={cordwoodSettingsHeader:"_cordwood-settings-header_1mzwv_1",cordwoodChangelogButton:"_cordwood-changelog-button_1mzwv_1"};var ve=pe(re());var at="._defaultColor_hmmrj_1{color:#4f545c}._h1_hmmrj_1{font-size:20px;line-height:24px}._h1_hmmrj_1,._h1_hmmrj_1 ._h2_hmmrj_1{font-weight:500}._h2_hmmrj_1{font-size:16px;line-height:20px;text-transform:uppercase}._h3_hmmrj_1{line-height:24px;font-weight:400}._h3_hmmrj_1,._h3_hmmrj_1 ._h4_hmmrj_1{font-size:16px}._h4_hmmrj_1{line-height:20px;letter-spacing:.3px}._h4_hmmrj_1,._h4_hmmrj_1 ._h5_hmmrj_1{font-weight:500;text-transform:uppercase}._h5_hmmrj_1{font-size:12px;line-height:16px}._faded_hmmrj_1{color:rgba(114,118,126,.6)}._card_hmmrj_1{position:relative;margin:0 0 15px;padding:10px;border-radius:5px;font-size:14px;line-height:22px}._cardPrimary_hmmrj_1{color:#dcddde;background:#36393e}._cardPrimaryOutline_hmmrj_1{color:#dcddde;background:#36393e;border:1px solid #1e2124}._cardSuccess_hmmrj_1{color:#4dc303;background:#daffd1}._cardSuccessOutline_hmmrj_1{color:#4dc303;background:#daffd1;border:1px solid #4dc303}._cardWarning_hmmrj_1{color:#c38803;background:#ffefd1}._cardWarningOutline_hmmrj_1{color:#c38803;background:#ffefd1;border:1px solid #c38803}._cardDanger_hmmrj_1{color:#f04747;background:#fdecec}._cardDangerOutline_hmmrj_1{color:#f04747;background:#fdecec;border:1px solid #f04747}._cardBrand_hmmrj_1{background:rgba(88,101,242,.1)}._cardBrandOutline_hmmrj_1{background:rgba(88,101,242,.1);border:2px solid rgba(88,101,242,.5)}";document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(at));var oe={defaultColor:"_defaultColor_hmmrj_1",h1:"_h1_hmmrj_1",h2:"_h2_hmmrj_1",h3:"_h3_hmmrj_1",h4:"_h4_hmmrj_1",h5:"_h5_hmmrj_1",faded:"_faded_hmmrj_1",card:"_card_hmmrj_1",cardPrimary:"_cardPrimary_hmmrj_1",cardPrimaryOutline:"_cardPrimaryOutline_hmmrj_1",cardSuccess:"_cardSuccess_hmmrj_1",cardSuccessOutline:"_cardSuccessOutline_hmmrj_1",cardWarning:"_cardWarning_hmmrj_1",cardWarningOutline:"_cardWarningOutline_hmmrj_1",cardDanger:"_cardDanger_hmmrj_1",cardDangerOutline:"_cardDangerOutline_hmmrj_1",cardBrand:"_cardBrand_hmmrj_1",cardBrandOutline:"_cardBrandOutline_hmmrj_1"};var ne=(e,t,r)=>{console[r]("%cCordwood%c",`background-color: ${t}; color: black; font-weight: 600; border-radius: 16px; padding: 0px 5px 0px 5px;`,"",e)},j={log:e=>ne(e,"#b6c76c","log"),warn:e=>ne(e,"#e19c3d","warn"),error:e=>ne(e,"#a63d40","error")};function st(e){return e==null||typeof e!="string"?"":`${e.charAt(0).toUpperCase()}${e.slice(1).toLowerCase()}`}function Ae(e,t,...r){let o=r.reduce((s,l)=>s+st(l),""),n=`${t}${o}`,i=e[n];return i??(j.warn(`Class doesn't exist: ${t} ${n}`),"")}var Pe={PRIMARY:"cardPrimary",DANGER:"cardDanger",WARNING:"cardWarning",SUCCESS:"cardSuccess",BRAND:"cardBrand",CUSTOM:"cardCustom"},d=class extends a.PureComponent{render(){let{children:t,type:r,className:o,outline:n,...i}=this.props,s="";return n&&(s="outline"),a.createElement("div",{className:(0,ve.default)(oe.card,o,Ae(oe,r,s)),...i},t)}};x(d,"displayName","Card"),x(d,"Types",Pe),x(d,"defaultProps",{type:Pe.PRIMARY,outline:!0});var lt="._button_18hig_1{padding:5px 30px;font-size:16px;line-height:16px;font-weight:600;-webkit-transition:background-color .2s ease;transition:background-color .2s ease;position:relative;cursor:pointer}._buttonPrimary_18hig_1{border-radius:3px;background-color:#7289da;color:#fff}";document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(lt));var ie={button:"_button_18hig_1",buttonPrimary:"_buttonPrimary_18hig_1"};var Ne=pe(re()),ct=b("Scroller"),D=class extends a.Component{renderUpdater(){return a.createElement(d,{type:d.Types.PRIMARY},a.createElement(d,{type:d.Types.BRAND},"Last updated 3 days ago"),a.createElement("div",{style:{display:"flex",flex:"1 1 auto",alignItems:"stretch",justifyContent:"flex-start",flexWrap:"nowrap",flexDirection:"row",boxSizing:"border-box"}},a.createElement("div",{style:{marginLeft:0,flex:"1 1 auto"}},a.createElement("div",null,"Last update:"),a.createElement("div",null,a.createElement("a",{href:"https://google.com"},"8fba85b")," by Alyxia Sother: commit message")),a.createElement("button",{className:(0,Ne.default)(ie.button,ie.buttonPrimary)},"Update")))}render(){return a.createElement(ct,{className:"settings-wrapper settings-panel"},a.createElement("img",{style:{width:"100%"},src:"https://raw.githubusercontent.com/Cordwood/Cordwood/master/.assets/cordwood-transparent-black.png"}),this.renderUpdater(),a.createElement(d,{type:d.Types.PRIMARY,outline:!0},"Hi"),a.createElement(d,{type:d.Types.SUCCESS,outline:!0},"Hi"),a.createElement(d,{type:d.Types.WARNING,outline:!0},"Hi"),a.createElement(d,{type:d.Types.DANGER,outline:!0},"Hi"),a.createElement(d,{type:d.Types.BRAND,outline:!0},"Hi"),a.createElement("p",{style:{position:"absolute",bottom:0}},"Made with \u2764\uFE0F by Beef and Alyxia"))}};x(D,"displayName","AboutView");function ae(){J();let e=u("UserSettingsModalSections");Object.assign(e.UserSettingsModalSections,{CORDWOOD_ABOUT:"CORDWOOD_ABOUT",CORDWOOD_SETTINGS:"CORDWOOD_SETTINGS",CORDWOOD_PLUGINS:"CORDWOOD_PLUGINS"});let t=u("getUserSettingsModalSections");_("getUserSettingsModalSections",t,(o,n)=>{n.push({section:e.UserSettingsModalSections.CORDWOOD_SETTINGS,label:"Cordwood",element:ee})});let r=u("TabBarItem","TabBarHeader","TabBarSeparator");_("render",t.default.prototype,(o,n)=>{n.props.children[0].props.children.props.children[1].push(a.createElement(r.TabBarHeader,{className:te.cordwoodSettingsHeader},"Cordwood"),a.createElement(r.TabBarItem,{key:"CORDWOOD_ABOUT"},"About"),a.createElement(r.TabBarItem,{key:"CORDWOOD_SETTINGS"},"Settings"),a.createElement("div",{className:te.cordwoodChangelogButton,onClick:()=>{dt(),g.dispatch({type:"CHANGE_LOG_OPEN"})}},"Cordwood Change Log")),n.props.children[0].props.children.props.selectedItem==="CORDWOOD_ABOUT"&&(n.props.children[1].props.children[0].props.children=a.createElement(D,null)),n.props.children[0].props.children.props.selectedItem==="CORDWOOD_SETTINGS"&&(n.props.children[1].props.children[0].props.children=a.createElement(ee,null))})}function dt(){let e=b("MarkdownModal");_("render",e.prototype,(t,r)=>{if(!r.props.className.includes("change-log"))return r;let n=window.cordwood.changelog.replace(/\r/g,"").split(`---changelog---
`).slice(1).map(c=>{let p=!1,m={},w=c.split(`
`).filter(f=>{if(f==="---")return p=!0,!1;if(!p){let h=f.split(": "),S=h.shift(),I=h.join(": ");m[S]=JSON.parse(I)}return p}).join(`
`);return{...m,body:w}})[0],i=r.props.children[0].props.children[0];i[0].props.children="Cordwood Changelog",i[1]=` (${n.date})`;let s=r.props.children[2].props.children;s[1].props.href="https://github.com/Cordwood/Cordwood/blob/master/CHANGELOG.md";let l=r.props.children[1];return l.props.children[0]=null,l.props.children[1]=[a.createElement(ke,{changelog:n})],r},!0)}function P(e,t,{walkable:r=[],ignore:o=[],maxDepth:n=100}={}){let i=0;function s(l,c,{walkable:p=[],ignore:m=[]}={}){if(i+=1,!(i>n)){if(typeof c=="string"){if(l.hasOwnProperty(c))return l[c]}else if(c(l))return l;if(!!l){if(Array.isArray(l))for(let w of l){let f=s(w,c,{walkable:p,ignore:m});if(f)return f}else if(typeof l=="object"){for(let w of Object.keys(l))if(!(p!=null&&p.includes(w))&&!m.includes(w))try{let f=s(l[w],c,{walkable:p,ignore:m});if(f)return f}catch{}}}}}return s(e,t,{walkable:r,ignore:o})}function se(e,t){P(e,t,{walkable:["props","children","child","sibling"]})}function le(e){let t=new Array;for(let[r,o]of Object.entries(e)){let n=Object.entries(o).map(([i,s])=>`${i.replace(/[A-Z]/g,l=>`-${l.toLowerCase()}`)}:${s}`).join(";");t.push(`${r}{${n}}`)}return t.join("")}async function ce(e){let t={cache:"no-cache"},r=new URL(e.endsWith("/")?e:e+"/"),o=await fetch(r+"manifest.json",t);if(!o.ok)throw new Error(`Could not load manifest for plugin at ${e}`);let n;try{n=await o.json()}catch{throw new Error(`Could not parse manifest for plugin at ${e}`)}let i;try{i=await(await fetch(r+"index.js",t)).text()}catch{throw new Error(`Could not load main file for plugin at ${e}`)}return{manifest:n,url:r,main:i}}var pt=window.eval;async function de(e){window.cordwood.plugins.loaded.push(e);let t=pt(e.main)(window.cordwood);t.onLoad&&t.onLoad()}var Ee=()=>_("dispatch",g,e=>{A.fluxLogger&&console.log(e[0])});if(window.cordwood)throw new Error("Cordwood is already injected...");var Le=!1;try{ae(),T.initialize(),Ee(),window.cordwood={utils:{logger:j,findInTree:P,findInReactTree:se,storage:{get:C.get,set:C.set,remove:C.remove,clear:C.clear},createStyle:le},patcher:{..._e},webpack:{...W,common:{...$}},plugins:{importPlugin:ce,loadPlugin:de,loaded:new Array},uninject:()=>{N(),Y(),delete window.cordwood}},fetch("https://raw.githubusercontent.com/Cordwood/Cordwood/master/CHANGELOG.md",{cache:"no-store"}).then(e=>e.text().then(t=>Object.assign(window.cordwood,{changelog:t})))}catch(e){Le=!0,j.error(`Cordwood failed to initialize... ${e.stack?e.stack:e.toString()}`)}Le||j.log("Loaded successfully!");})();
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
//# sourceURL=Cordwood